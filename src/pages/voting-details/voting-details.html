<ion-spinner name="dots" *ngIf="isLoading"></ion-spinner>

<ion-card *ngIf="address && !isLoading && !hasVoted">
  <ion-card-header>Vote for {{votingName$ |Â async}}</ion-card-header>
  <ion-card-content>
    <div *ngIf="locationPoints.length== 0">Add a location at the team page before start voting.</div>
    <div *ngFor="let locationPoint of locationPoints; let i=index">
      {{locationPoint.location.name}} <ion-badge item-end [style.backgroundColor]="colors[i]">{{ locationPoint.points }}</ion-badge>
      <ion-range-slider 
        min="0" 
        max="100" 
        from="0"
        from_min="0" 
        from_max="{{remainingPoints + locationPoint.points}}" 
        from_shadow="true"
        (onChange)="pointsChanged(locationPoint, $event)">
      </ion-range-slider>
    </div>

    <div *ngIf="locationPoints.length > 0">
      <page-voting-chart [locationPoints]="locationPoints" [reload]="chartReloadSubject"></page-voting-chart>

      <button ion-button outline block type="submit" [disabled]="remainingPoints != 0 || isTransmitting" (click)="submitVotes()">
        Submit your votes
        <ion-spinner name="dots" *ngIf="isTransmitting"></ion-spinner>
      </button>
    </div>
  </ion-card-content>
</ion-card>

<div *ngIf="hasVoted">
  You already voted for this voting.
  <button ion-button outline block type="submit" (click)="closeVoting()">Close voting</button>
</div>  
